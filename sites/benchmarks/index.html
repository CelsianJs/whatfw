<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Benchmarks — What Framework</title>
  <meta name="description" content="Performance benchmarks for What Framework's signals, rendering, and SSR.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <style>
    :root {
      --text: #18181b;
      --text-secondary: #52525b;
      --text-muted: #a1a1aa;
      --bg: #fafafa;
      --bg-alt: #ffffff;
      --accent: #18181b;
      --border: #e4e4e7;
      --code-bg: #f4f4f5;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { font-size: 16px; }

    body {
      font-family: 'Inter', -apple-system, sans-serif;
      color: var(--text);
      background: var(--bg);
      line-height: 1.6;
    }

    nav {
      padding: 16px 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid var(--border);
      background: var(--bg-alt);
    }

    .logo {
      font-weight: 700;
      font-size: 18px;
      text-decoration: none;
      color: var(--text);
    }

    .nav-links {
      display: flex;
      gap: 24px;
    }

    .nav-links a {
      color: var(--text-secondary);
      text-decoration: none;
      font-size: 14px;
      font-weight: 500;
    }

    .nav-links a:hover { color: var(--text); }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 48px 32px;
    }

    h1 {
      font-size: 36px;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 12px;
    }

    .subtitle {
      font-size: 18px;
      color: var(--text-secondary);
      margin-bottom: 48px;
      max-width: 600px;
    }

    /* Benchmark section */
    .benchmark-section {
      margin-bottom: 48px;
    }

    .benchmark-title {
      font-size: 20px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .benchmark-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg-alt);
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .benchmark-table th,
    .benchmark-table td {
      padding: 14px 16px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .benchmark-table th {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: var(--text-secondary);
      background: var(--bg);
    }

    .benchmark-table tr:last-child td {
      border-bottom: none;
    }

    .benchmark-table td:first-child {
      font-weight: 500;
    }

    .value {
      font-family: 'JetBrains Mono', monospace;
      font-size: 14px;
    }

    .note {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: 12px;
    }

    /* Methodology */
    .methodology {
      margin-top: 48px;
      padding: 24px;
      background: var(--bg-alt);
      border: 1px solid var(--border);
      border-radius: 8px;
    }

    .methodology h2 {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .methodology p {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 12px;
    }

    .methodology p:last-child {
      margin-bottom: 0;
    }

    .methodology code {
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      background: var(--code-bg);
      padding: 2px 6px;
      border-radius: 4px;
    }

    footer {
      padding: 24px 32px;
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 14px;
      color: var(--text-secondary);
    }

    footer a {
      color: var(--text);
      text-decoration: none;
    }

    @media (max-width: 768px) {
      .nav-links { display: none; }
      .container { padding: 32px 24px; }
    }
  </style>
</head>
<body>
  <nav>
    <a href="/" class="logo">What</a>
    <div class="nav-links">
      <a href="https://www.npmjs.com/package/what-framework">npm</a>
    </div>
  </nav>

  <div class="container">
    <h1>Performance Benchmarks</h1>
    <p class="subtitle">Real measured performance data from the What Framework test suite. All benchmarks run on a MacBook Pro M2.</p>

    <!-- Signals -->
    <div class="benchmark-section">
      <h2 class="benchmark-title">Signals</h2>
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Operation</th>
            <th>Ops/Second</th>
            <th>Time per Op</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Signal create</td>
            <td class="value">9.3M ops/sec</td>
            <td class="value">0.0001ms</td>
          </tr>
          <tr>
            <td>Signal read (100x per iteration)</td>
            <td class="value">3.8M ops/sec</td>
            <td class="value">0.0003ms</td>
          </tr>
          <tr>
            <td>Signal write (no subscribers)</td>
            <td class="value">1.1M ops/sec</td>
            <td class="value">0.0009ms</td>
          </tr>
          <tr>
            <td>Signal write (1 subscriber)</td>
            <td class="value">137K ops/sec</td>
            <td class="value">0.007ms</td>
          </tr>
        </tbody>
      </table>
      <p class="note">Subscriber overhead is expected — the effect runs on every write.</p>
    </div>

    <!-- Computed -->
    <div class="benchmark-section">
      <h2 class="benchmark-title">Computed Values</h2>
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Operation</th>
            <th>Ops/Second</th>
            <th>Time per Op</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Computed chain (depth 5)</td>
            <td class="value">1.2M ops/sec</td>
            <td class="value">0.0008ms</td>
          </tr>
          <tr>
            <td>Computed from 10 signals</td>
            <td class="value">890K ops/sec</td>
            <td class="value">0.001ms</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Effects -->
    <div class="benchmark-section">
      <h2 class="benchmark-title">Effects</h2>
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Operation</th>
            <th>Ops/Second</th>
            <th>Time per Op</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Effect create + dispose</td>
            <td class="value">4.2M ops/sec</td>
            <td class="value">0.0002ms</td>
          </tr>
          <tr>
            <td>Batch 100 writes</td>
            <td class="value">554K ops/sec</td>
            <td class="value">0.002ms</td>
          </tr>
        </tbody>
      </table>
      <p class="note">Batching prevents intermediate computations, making 100 writes nearly as fast as 1.</p>
    </div>

    <!-- Rendering -->
    <div class="benchmark-section">
      <h2 class="benchmark-title">Rendering (h function)</h2>
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Operation</th>
            <th>Ops/Second</th>
            <th>Time per Op</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Single element creation</td>
            <td class="value">8.9M ops/sec</td>
            <td class="value">0.0001ms</td>
          </tr>
          <tr>
            <td>List of 100 items</td>
            <td class="value">77K ops/sec</td>
            <td class="value">0.013ms</td>
          </tr>
          <tr>
            <td>Nested component tree (depth 5)</td>
            <td class="value">1.8M ops/sec</td>
            <td class="value">0.0006ms</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- SSR -->
    <div class="benchmark-section">
      <h2 class="benchmark-title">Server-Side Rendering</h2>
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Operation</th>
            <th>Ops/Second</th>
            <th>Time per Op</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>SSR simple element</td>
            <td class="value">1.5M ops/sec</td>
            <td class="value">0.0007ms</td>
          </tr>
          <tr>
            <td>SSR list of 100 items</td>
            <td class="value">18K ops/sec</td>
            <td class="value">0.055ms</td>
          </tr>
          <tr>
            <td>SSR complex component</td>
            <td class="value">45K ops/sec</td>
            <td class="value">0.022ms</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Bundle Size -->
    <div class="benchmark-section">
      <h2 class="benchmark-title">Bundle Size</h2>
      <table class="benchmark-table">
        <thead>
          <tr>
            <th>Package</th>
            <th>Size (gzipped)</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>what-framework (core)</td>
            <td class="value">~4kB</td>
          </tr>
        </tbody>
      </table>
      <p class="note">Measured using gzip -9 compression.</p>
    </div>

    <!-- Methodology -->
    <div class="methodology">
      <h2>Methodology</h2>
      <p>All benchmarks run on Node.js with the following approach:</p>
      <p>• <strong>Warmup:</strong> 1000 iterations discarded before measurement</p>
      <p>• <strong>Iterations:</strong> 10,000+ iterations per test</p>
      <p>• <strong>Timing:</strong> High-resolution <code>performance.now()</code></p>
      <p>• <strong>Calculation:</strong> Trimmed mean (discard top/bottom 10%)</p>
      <p>• <strong>Environment:</strong> MacBook Pro M2, Node.js v20</p>
      <p>Source code available in <code>/benchmark</code> directory. Run with <code>npm run bench</code>.</p>
    </div>
  </div>

  <footer>
    What Framework v0.1.0 — <a href="https://www.npmjs.com/package/what-framework">npm</a>
  </footer>
</body>
</html>
